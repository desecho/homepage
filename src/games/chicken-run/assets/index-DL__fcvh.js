(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function i(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(s){if(s.ep)return;s.ep=!0;const r=i(s);fetch(s.href,r)}})();const h=960,o=540,l=430,d=1/60,c=160,M=58,p=48,C=2200,_=-760,w=280,O=14,y=760,N=100,R=[32,40,48],H=[52,68,84],m=420,D=.12,A=.08,G=.12,k=.08,g="chicken_run_best_score_v1";class L{constructor(){this.x=c,this.y=l-p,this.w=M,this.h=p,this.vy=0,this.grounded=!0}reset(){this.x=c,this.y=l-this.h,this.vy=0,this.grounded=!0}update(e,i){i&&this.grounded&&(this.vy=_,this.grounded=!1),this.vy+=C*e,this.y+=this.vy*e;const n=l-this.h;this.y>=n&&(this.y=n,this.vy=0,this.grounded=!0)}getHitbox(){const e=this.w*D,i=this.h*A;return{x:this.x+e,y:this.y+i,w:this.w-e*2,h:this.h-i*2}}render(e){const i=l-this.h,n=Math.max(0,i-this.y),s=this.grounded?Math.sin(performance.now()*.025)*2.6:-2,r=Math.max(.35,1-n/120);e.save(),e.translate(this.x,this.y),e.fillStyle=`rgba(37, 54, 32, ${.22*r})`,e.beginPath(),e.ellipse(this.w*.48,l-this.y+7,this.w*.43*r,7*r,0,0,Math.PI*2),e.fill();const a=e.createLinearGradient(0,0,0,this.h);a.addColorStop(0,"#ffe98a"),a.addColorStop(.55,"#f9d862"),a.addColorStop(1,"#efbd42"),e.fillStyle=a,e.beginPath(),e.roundRect(2,7,this.w-4,this.h-8,14),e.fill(),e.strokeStyle="#d19d2b",e.lineWidth=1.5,e.stroke(),e.fillStyle="#d39c2f",e.beginPath(),e.moveTo(3,this.h*.54),e.quadraticCurveTo(-8,this.h*.62,4,this.h*.74),e.quadraticCurveTo(10,this.h*.67,12,this.h*.56),e.closePath(),e.fill(),e.fillStyle="#d84c3f",e.beginPath(),e.moveTo(this.w*.52,8),e.quadraticCurveTo(this.w*.58,-4,this.w*.64,7),e.quadraticCurveTo(this.w*.58,13,this.w*.52,8),e.fill(),e.beginPath(),e.moveTo(this.w*.62,8),e.quadraticCurveTo(this.w*.68,-4,this.w*.74,7),e.quadraticCurveTo(this.w*.68,13,this.w*.62,8),e.fill(),e.fillStyle="#f1ba3f",e.beginPath(),e.ellipse(this.w*.48,this.h*.56,15,11+s*.2,-.22,0,Math.PI*2),e.fill(),e.strokeStyle="#dfab35",e.lineWidth=1.2,e.beginPath(),e.ellipse(this.w*.48,this.h*.56,15,11+s*.2,-.22,0,Math.PI*2),e.stroke(),e.fillStyle="#ffd86f",e.beginPath(),e.ellipse(this.w*.43,this.h*.52,6.5,4.8,-.2,0,Math.PI*2),e.fill(),e.fillStyle="#ff9e43",e.beginPath(),e.moveTo(this.w-4,this.h*.32),e.lineTo(this.w+12,this.h*.39),e.lineTo(this.w-4,this.h*.45),e.closePath(),e.fill(),e.fillStyle="#e07f32",e.beginPath(),e.moveTo(this.w-3,this.h*.42),e.lineTo(this.w+9,this.h*.46),e.lineTo(this.w-3,this.h*.5),e.closePath(),e.fill(),e.fillStyle="#fff",e.beginPath(),e.ellipse(this.w*.72,this.h*.27,4.8,4.2,0,0,Math.PI*2),e.fill(),e.fillStyle="#1f2530",e.beginPath(),e.arc(this.w*.73,this.h*.27,2.5,0,Math.PI*2),e.fill(),e.fillStyle="#fff",e.beginPath(),e.arc(this.w*.745,this.h*.245,.9,0,Math.PI*2),e.fill(),e.strokeStyle="#be7326",e.lineWidth=3,e.lineCap="round",e.beginPath(),e.moveTo(this.w*.3,this.h-1),e.lineTo(this.w*.3+s,this.h+12),e.moveTo(this.w*.62,this.h-1),e.lineTo(this.w*.62-s,this.h+12),e.stroke(),e.strokeStyle="#c97e2e",e.lineWidth=2,e.beginPath(),e.moveTo(this.w*.3+s,this.h+12),e.lineTo(this.w*.24+s,this.h+14),e.moveTo(this.w*.3+s,this.h+12),e.lineTo(this.w*.34+s,this.h+14),e.moveTo(this.w*.62-s,this.h+12),e.lineTo(this.w*.56-s,this.h+14),e.moveTo(this.w*.62-s,this.h+12),e.lineTo(this.w*.66-s,this.h+14),e.stroke(),e.restore()}}function F(t,e,i,n=0){return{id:t,x:h+n,y:l-i,w:e,h:i,passed:!1}}function Q(t){const e=t.w*G,i=t.h*k;return{x:t.x+e,y:t.y+i,w:t.w-e*2,h:t.h-i*2}}function X(t,e){t.save(),t.translate(e.x,e.y),t.fillStyle="#6f4e37",t.fillRect(0,0,e.w,e.h),t.fillStyle="#8a6241";const i=6;for(let n=5;n<e.h;n+=12)t.fillRect(1,n,e.w-2,i);t.fillStyle="#5e3f29",t.fillRect(3,0,5,e.h),t.fillRect(e.w-8,0,5,e.h),t.restore()}class B{constructor(e){this.canvas=e,this.jumpQueued=!1,this.pauseQueued=!1,this.pointerQueued=!1,this.onKeyDown=i=>{if(!i.repeat){if(i.code==="Space"||i.code==="ArrowUp"){this.jumpQueued=!0,i.preventDefault();return}i.code==="KeyP"&&(this.pauseQueued=!0,i.preventDefault())}},this.onPointerDown=i=>{i.preventDefault(),this.jumpQueued=!0,this.pointerQueued=!0},window.addEventListener("keydown",this.onKeyDown),this.canvas.addEventListener("pointerdown",this.onPointerDown,{passive:!1})}destroy(){window.removeEventListener("keydown",this.onKeyDown),this.canvas.removeEventListener("pointerdown",this.onPointerDown)}poll(){const e={jumpPressed:this.jumpQueued,pausePressed:this.pauseQueued,pointerPressed:this.pointerQueued};return this.jumpQueued=!1,this.pauseQueued=!1,this.pointerQueued=!1,e}}function U(t,e){return Math.min(y,t+O*e)}function Y(t,e,i){return i!=="running"?t:t+N*e}function S(t,e){const i=Math.floor(e()*t.length);return t[i]??t[t.length-1]}function K(t){let e=t>>>0;return e===0&&(e=1),()=>(e=e*1664525+1013904223>>>0,e/4294967296)}function j(t){const e=220+t*.45;return{min:e,max:e*1.75}}class q{constructor(e=Math.random){this.distanceUntilNext=m,this.nextObstacleId=1,this.random=e}reset(e){typeof e=="number"&&(this.random=K(e)),this.distanceUntilNext=m,this.nextObstacleId=1}sampleGap(e){const{min:i,max:n}=j(e);return i+(n-i)*this.random()}update(e,i){this.distanceUntilNext-=e*i;const n=[];for(;this.distanceUntilNext<=0;){const s=S(R,this.random),r=S(H,this.random);n.push(F(this.nextObstacleId,s,r,Math.max(0,this.distanceUntilNext))),this.nextObstacleId+=1,this.distanceUntilNext+=this.sampleGap(e)}return n}}let u=0;function T(){return typeof window<"u"&&typeof window.localStorage<"u"}function W(){if(!T())return u;try{const t=window.localStorage.getItem(g),e=t===null?0:Number.parseInt(t,10);return Number.isFinite(e)&&e>0?e:0}catch{return u}}function $(t){const e=Math.max(0,Math.floor(t));if(u=Math.max(u,e),!!T())try{window.localStorage.setItem(g,String(e))}catch{}}function z(t,e){return t.x<e.x+e.w&&t.x+t.w>e.x&&t.y<e.y+e.h&&t.y+t.h>e.y}function V(t,e,i,n){t.save(),t.fillStyle="#11384d",t.font="700 28px Trebuchet MS",t.textAlign="left",t.fillText(`Score: ${Math.floor(i)}`,22,36),t.fillText(`Best: ${Math.floor(n)}`,22,70),e==="paused"&&(t.fillStyle="rgba(255, 255, 255, 0.84)",t.fillRect(0,0,h,o),t.fillStyle="#0f3448",t.textAlign="center",t.font="700 56px Trebuchet MS",t.fillText("Paused",h/2,o/2-16),t.font="600 24px Trebuchet MS",t.fillText("Press P or tap to continue",h/2,o/2+28)),t.restore()}function J(t){t.save(),t.fillStyle="rgba(12, 28, 42, 0.38)",t.fillRect(0,0,h,o),t.fillStyle="#fffdf6",t.textAlign="center",t.font="700 70px Trebuchet MS",t.fillText("Chicken Run",h/2,o/2-48),t.font="600 26px Trebuchet MS",t.fillText("Space / ArrowUp / Tap to jump and start",h/2,o/2+6),t.font="600 21px Trebuchet MS",t.fillText("Press P to pause while running",h/2,o/2+48),t.restore()}function Z(t,e,i){t.save(),t.fillStyle="rgba(22, 16, 17, 0.58)",t.fillRect(0,0,h,o),t.fillStyle="#fff8e7",t.textAlign="center",t.font="700 62px Trebuchet MS",t.fillText("Game Over",h/2,o/2-40),t.font="600 30px Trebuchet MS",t.fillText(`Score: ${Math.floor(e)}`,h/2,o/2+8),t.fillText(`Best: ${Math.floor(i)}`,h/2,o/2+48),t.font="600 22px Trebuchet MS",t.fillText("Space or tap to restart",h/2,o/2+92),t.restore()}class x{constructor(e){this.canvas=e,this.chicken=new L,this.spawner=new q,this.state="menu",this.obstacles=[],this.score=0,this.bestScore=0,this.speed=w,this.worldDistance=0,this.frameId=0,this.lastTs=0,this.accumulator=0,this.onFrame=n=>{const s=Math.min((n-this.lastTs)/1e3,.1);for(this.lastTs=n,this.accumulator+=s;this.accumulator>=d;)this.tick(d),this.accumulator-=d;this.render(),this.frameId=requestAnimationFrame(this.onFrame)};const i=e.getContext("2d");if(!i)throw new Error("Unable to initialize 2D rendering context.");this.ctx=i,this.ctx.imageSmoothingEnabled=!0,this.bestScore=W(),this.input=new B(this.canvas),this.resetRun(),this.state="menu"}start(){this.frameId===0&&(this.lastTs=performance.now(),this.frameId=requestAnimationFrame(this.onFrame))}stop(){this.frameId!==0&&(cancelAnimationFrame(this.frameId),this.frameId=0),this.input.destroy()}tick(e){const i=this.input.poll();if(this.state==="menu"){(i.jumpPressed||i.pointerPressed)&&this.startRun();return}if(this.state==="paused"){(i.pausePressed||i.pointerPressed)&&(this.state="running");return}if(this.state==="gameover"){(i.jumpPressed||i.pointerPressed)&&this.startRun();return}if(i.pausePressed){this.state="paused";return}this.speed=U(this.speed,e),this.speed=Math.min(this.speed,y),this.score=Y(this.score,e,this.state),this.worldDistance+=this.speed*e,this.chicken.update(e,i.jumpPressed);const n=this.spawner.update(this.speed,e);n.length>0&&this.obstacles.push(...n);for(const r of this.obstacles)r.x-=this.speed*e;this.obstacles=this.obstacles.filter(r=>r.x+r.w>-4);const s=this.chicken.getHitbox();for(const r of this.obstacles)if(z(s,Q(r))){this.toGameOver();return}}startRun(){this.resetRun(),this.state="running"}resetRun(){this.chicken.reset(),this.obstacles=[],this.spawner.reset(),this.score=0,this.speed=w,this.worldDistance=0}toGameOver(){this.state="gameover";const e=Math.floor(this.score);e>this.bestScore&&(this.bestScore=e,$(e))}render(){this.renderBackground();for(const e of this.obstacles)X(this.ctx,e);this.chicken.render(this.ctx),V(this.ctx,this.state,this.score,this.bestScore),this.state==="menu"?J(this.ctx):this.state==="gameover"&&Z(this.ctx,this.score,this.bestScore)}renderCloud(e,i,n){const s=[[-34,4,34,19],[-8,-8,31,19],[22,-2,35,20],[52,5,25,15]];this.ctx.fillStyle="rgba(244, 252, 255, 0.82)";for(const[r,a,v,E]of s)this.ctx.beginPath(),this.ctx.ellipse(e+r*n,i+a*n,v*n,E*n,0,0,Math.PI*2),this.ctx.fill();this.ctx.fillStyle="rgba(218, 236, 248, 0.4)",this.ctx.beginPath(),this.ctx.ellipse(e+10*n,i+10*n,62*n,16*n,0,0,Math.PI*2),this.ctx.fill()}renderBackground(){const e=this.ctx.createLinearGradient(0,0,0,o);e.addColorStop(0,"#92d6ff"),e.addColorStop(1,"#e9f8ff"),this.ctx.fillStyle=e,this.ctx.fillRect(0,0,h,o);const i=-(this.worldDistance*.04)%(h+220);this.renderCloud(180+i,95,1.05),this.renderCloud(700+i,126,1.14),this.renderCloud(1040+i,86,.88);const n=-(this.worldDistance*.18)%60;this.ctx.fillStyle="rgba(82, 189, 113, 0.25)";for(let s=n;s<h+60;s+=60)this.ctx.fillRect(s,l+22,30,o-l-22);this.ctx.fillStyle="#58a95f",this.ctx.fillRect(0,l,h,o-l),this.ctx.fillStyle="#42944a",this.ctx.fillRect(0,l-6,h,8)}}const P=document.querySelector("#game");if(!P)throw new Error("Missing canvas element #game.");const f=P;f.width=h;f.height=o;function b(){const t=Math.min(window.innerWidth/h,window.innerHeight/o);f.style.width=`${Math.floor(h*t)}px`,f.style.height=`${Math.floor(o*t)}px`}window.addEventListener("resize",b);b();const I=new x(f);I.start();window.addEventListener("beforeunload",()=>{I.stop()});
